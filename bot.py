# bot.py
# –ü—Ä–æ—Å—Ç–æ–π Telegram-–±–æ—Ç ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–Ω–æ–ø–æ–∫.
# –ß–∏—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è TELEGRAM_TOKEN
# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: pyTelegramBotAPI

import os
import telebot
from telebot import types
import threading
import time

TOKEN = os.getenv("TELEGRAM_TOKEN")
if not TOKEN:
    raise RuntimeError("TELEGRAM_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç TELEGRAM_TOKEN –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (Replit Secrets –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è).")

bot = telebot.TeleBot(TOKEN, parse_mode='HTML')

# –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: chat_id -> current_step_index
user_states = {}

# –°–ø–∏—Å–æ–∫ —à–∞–≥–æ–≤ (–≤–∑—è—Ç–æ –∏–∑ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞). –ö–∞–∂–¥—ã–π —à–∞–≥:
# {"text": "...", "button": "–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏" –∏–ª–∏ None}
steps = [
    {"text": None, "button": "–°—Ç–∞—Ä—Ç"},
    {"text": "–ü—Ä–∏–≤–µ—Ç, –í–∞—Å—è! –¢–µ–±—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Å–æ–±–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è ¬´–ê—Å—å–∫–∏¬ª ‚Äî ICQ Memory. –°–µ–≥–æ–¥–Ω—è —è –ø—Ä–æ–≤–µ–¥—É —Ç–µ–±—è –ø–æ –º–µ—Å—Ç–∞–º, –≥–¥–µ –Ω–∞—á–∞–ª–∞—Å—å –≤–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è. –ì–æ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤–æ –≤—Ä–µ–º–µ–Ω–∏?", "button": "–ì–æ—Ç–æ–≤!"},
    {"text": "–ü–µ—Ä–≤–∞—è —Ç–æ—á–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è‚Ä¶\n\n‚Ä¶–ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Ç–æ—á–∫–∞ ‚Ññ1 ‚Äî –ó-—è –î–∞—á–Ω–∞—è, –ø–ª–æ—â–∞–¥—å –õ–µ–Ω–∏–Ω–∞. –¢–∞–º, –≥–¥–µ –≤—Å–µ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ—Å—å. –ï–¥–µ–º? üòâ", "button": "–ï–¥–µ–º!"},
    {"text": "–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –Ω–∞ –º–µ—Å—Ç–µ, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É.", "button": "–ù–∞ –º–µ—Å—Ç–µ"},
    {"text": "–ó–¥–µ—Å—å –¥–≤–µ –∞–≤–∞—Ç–∞—Ä–∫–∏ –≤ –æ–≥—Ä–æ–º–Ω–æ–º —Ü–∏—Ñ—Ä–æ–≤–æ–º –æ–∫–µ–∞–Ω–µ –Ω–∞—à–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –ù–∏–∫–Ω–µ–π–º Worm_Gad –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã. –ù–∏–∫–Ω–µ–π–º Darko –ø—Ä–∏–Ω—è–ª –µ–≥–æ. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –ó–¥–µ—Å—å –Ω–∞—á–∞–ª—Å—è –≤–∞—à –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏. –°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –≤ –∂–∏–∑–Ω–∏. –°—Ç–∞—Ç—É—Å ¬´–í —Å–µ—Ç–∏¬ª.\n\n–ù–∞–∂–º–∏, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ –¥–≤–∏–Ω—É—Ç—å—Å—è –¥–∞–ª—å—à–µ:", "button": "–ö —Å–ª–µ–¥—É—é—â–µ–π —Ç–æ—á–∫–µ"},
    {"text": "Error 404", "button": None},
    {"text": "–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ... –ü–∞–∫–µ—Ç—ã –¥–∞–Ω–Ω—ã—Ö —É—Ç–µ—Ä—è–Ω—ã‚Ä¶", "button": None},
    {"text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Worm_Gad –Ω–µ –≤ —Å–µ—Ç–∏...", "button": None},
    {"text": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Darko –Ω–µ –≤ —Å–µ—Ç–∏...", "button": None},
    {"text": None, "button": "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑—å"},
    {"text": "...–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω...", "button": None},
    {"text": "...–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω...", "button": None},
    {"text": "‚Ä¶–°–≤—è–∑—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –ó–∞ —ç—Ç–æ –≤—Ä–µ–º—è –ø—Ä–æ–∏–∑–æ—à–ª–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤. –ü—Ä–æ—Ç–æ–∫–æ–ª ¬´–î—Ä—É–∂–±–∞¬ª –∞–ø–≥—Ä–µ–π–¥–∏–ª—Å—è –¥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ¬´–°—É–¥—å–±–∞¬ª. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–ª–µ–¥—É—é—â–µ–π —Ç–æ—á–∫–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã.\n\n–≠—Ç–æ –∞–¥—Ä–µ—Å, –≥–¥–µ –≤—ã –Ω–∞—à–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ —Å–Ω–æ–≤–∞ ‚Äî –ú—è—Å–Ω–∏—Ü–∫–∞—è, 138.", "button": "–ü–æ–µ—Ö–∞–ª–∏"},
    {"text": "–ö–∞–∫ –¥–æ–±–µ—Ä–µ—Ç–µ—Å—å, –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É:", "button": "–î–æ–±—Ä–∞–ª–∏—Å—å"},
    {"text": "–ó–¥–µ—Å—å, –ø–æ—Å–ª–µ –¥–æ–ª–≥–æ–π –ø–∞—É–∑—ã, –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞. –≠—Ç–æ –º–µ—Å—Ç–æ ‚Äî —Ç–æ—á–∫–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è.\n\n–ö–æ–≥–¥–∞ —Å–ø—É—Å—Ç—è –≥–æ–¥—ã –º–æ–ª—á–∞–Ω–∏—è –¥–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞ —Å–Ω–æ–≤–∞ –Ω–∞—à–ª–∏ –¥–æ—Ä–æ–≥—É –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É. –ó–¥–µ—Å—å —Ç—ã –ø—Ä–∏–µ—Ö–∞–ª –∫ –Ω–µ–π –ø–æ—Å–ª–µ –¥–æ–ª–≥–æ–π —Ä–∞–∑–ª—É–∫–∏. –° —ç—Ç–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–∑—Ä–æ—Å–ª–∞—è, —á–µ—Å—Ç–Ω–∞—è, –Ω–∞—Å—Ç–æ—è—â–∞—è –∏—Å—Ç–æ—Ä–∏—è.\n\n–°–æ–æ–±—â–∏, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ –µ—Ö–∞—Ç—å –¥–∞–ª—å—à–µ:", "button": "–ü–æ–µ—Ö–∞–ª–∏ –¥–∞–ª—å—à–µ"},
    {"text": "–¢–µ–ø–µ—Ä—å –µ–¥–µ–º –Ω–∞ –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—É—é, 8–ë.", "button": "–ï–¥–µ–º!"},
    {"text": "–•–æ—Ä–æ—à–µ–π –¥–æ—Ä–æ–≥–∏! –î–∞–π –∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ –ø—Ä–∏–µ–¥–µ—Ç–µ:", "button": "–ú—ã –ø—Ä–∏–µ—Ö–∞–ª–∏"},
    {"text": "–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞—è ‚Äî –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ üòâ\n\n–ó–¥–µ—Å—å —Å–ª—É—á–∏–ª–æ—Å—å —Ç–æ, —á—Ç–æ –æ–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞—é—Ç ¬´—Ç–æ—á–∫–æ–π –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç–∏¬ª. –ó–¥–µ—Å—å –≤—ã —Å—Ç–∞–ª–∏ —á—É—Ç—å –±–ª–∏–∂–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ ¬´–º—ã –≤—Å—Ç—Ä–µ—á–∞–µ–º—Å—è¬ª.\n\n–ï—Å–ª–∏ –±—ã —É ICQ –±—ã–ª–∏ —ç–º–æ—Ü–∏–∏, –æ–Ω–∞ –±—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∞ –≤–∞–º –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ç—É—Å ¬´–í—Å–µ —Å–µ—Ä—å—ë–∑–Ω–æ¬ª. 18+.\n\n–ú–æ–∂–µ—Ç–µ –ø–æ—Å–º–∞–∫–æ–≤–∞—Ç—å –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è, –∞ –ø–æ—Ç–æ–º –¥–≤–∏–Ω—É—Ç—å—Å—è –¥–∞–ª—å—à–µ:", "button": "–°–ª–µ–¥—É—é—â–∞—è —Ç–æ—á–∫–∞"},
    {"text": "–í –ø—É—Ç—å ‚Äî –µ–¥–µ–º –≤ –ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã!", "button": "–ï–¥–µ–º!"},
    {"text": "–°–º–æ—Ç—Ä–∏—Ç–µ, –Ω–µ –∑–∞–±–ª—É–¥–∏—Ç–µ—Å—å! –¢—ã–∫–Ω–∏ –∫–Ω–æ–ø–∫—É, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –Ω–∞ –º–µ—Å—Ç–µ:", "button": "–ù–∞ –º–µ—Å—Ç–µ"},
    {"text": "–ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã ‚Äî –º–µ—Å—Ç–æ, –≥–¥–µ –∫–∏–ª–æ–º–µ—Ç—Ä—ã –ø—Ä–µ–≤—Ä–∞—â–∞–ª–∏—Å—å –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã, –∞ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã ‚Äî –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–µ. –≠—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –≤—ã —É—á–∏–ª–∏—Å—å —Å–ª—ã—à–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞,\n–≥–¥–µ —Ä–æ–∂–¥–∞–ª–∞—Å—å –ª—ë–≥–∫–æ—Å—Ç—å, –¥–æ–≤–µ—Ä–∏–µ, –≤–∞—à–∞ –±–ª–∏–∑–æ—Å—Ç—å.\n\n–í—Å–ø–æ–º–Ω–∏—Ç–µ, –∫–∞–∫ —Ö–æ—Ä–æ—à–æ –≤–∞–º —Ç—É—Ç –±—ã–ª–æ, –∞ –ø–æ—Ç–æ–º –ø–æ–µ–¥–µ–º –¥–∞–ª—å—à–µ:", "button": "–ü–æ–µ—Ö–∞–ª–∏"},
    {"text": "–ï–∑–∂–∞–π—Ç–µ –Ω–∞ —É–ª–∏—Ü—É –¢–∞—Ä—Ö–æ–≤–∞, –¥–æ–º 27", "button": "–í –ø—É—Ç—å!"},
    {"text": "–í—Å—Ç—Ä–µ—Ç–∏–º—Å—è —Ç–∞–º. –°–æ–æ–±—â–∏, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã:", "button": "–ú—ã –ø—Ä–∏–µ—Ö–∞–ª–∏, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?"},
    {"text": "–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫ –¥–æ–º—É. –ù–æ –∫ –¥—Ä—É–≥–æ–º—É –¥–æ–º—É. –ö —Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É, –∫–æ–≥–¥–∞ –≤—ã —É–∂–µ –±—ã–ª–∏ —Å–µ–º—å–µ–π, –∫–æ–≥–¥–∞ –≤ —ç—Ç–æ–π –∫–≤–∞—Ä—Ç–∏—Ä–µ –ø–æ—è–≤–ª—è–ª–∏—Å—å –Ω–æ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏, —Ä–∏—Ç—É–∞–ª—ã, –º–æ–º–µ–Ω—Ç—ã. –î–æ–º ‚Äî —ç—Ç–æ –Ω–µ —Å—Ç–µ–Ω—ã. –≠—Ç–æ —á–µ–ª–æ–≤–µ–∫ —Ä—è–¥–æ–º. –ò —Ç—ã —É–∂–µ –∑–Ω–∞–µ—à—å, –∫—Ç–æ —Ç–≤–æ–π –¥–æ–º.", "button": "–ö–æ–Ω–µ—á–Ω–æ, –∑–Ω–∞—é!"},
    {"text": "–ü—Ä–æ–∫–∞—Ç–∏–º—Å—è –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ? –°–ª–µ–¥—É—é—â–∞—è —Ç–æ—á–∫–∞ ‚Äî —Å–º–æ—Ç—Ä–æ–≤–∞—è —É —Å—Ç–∞—Ä–æ–≥–æ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞.", "button": "–ï–¥–µ–º —Ç—É–¥–∞"},
    {"text": "–û—Ç–ª–∏—á–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∏–º, –∫–æ–≥–¥–∞ –¥–æ–±–µ—Ä–µ—Ç–µ—Å—å", "button": "–î–æ–±—Ä–∞–ª–∏—Å—å"},
    {"text": "–ó–¥–µ—Å—å, –Ω–∞ –≤—ã—Å–æ—Ç–µ, –≤—ã —á–∞—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–ª–∏ –º—ã—Å–ª–∏. –û—Ç—Å—é–¥–∞ –≤–∏–¥–Ω–æ –≤—Å—ë. –ò —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –æ—Ç—Å—é–¥–∞ –±—ã–ª–æ –≤–∏–¥–Ω–æ, —á—Ç–æ –≤ –ª—é–±–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ ‚Äî –≤—ã –≤–º–µ—Å—Ç–µ. –ú–µ—Å—Ç–æ, –≥–¥–µ –≥–æ—Ä–æ–¥ –ª–µ–∂–∞–ª —É –≤–∞—à–∏—Ö –Ω–æ–≥, –∞ –º–µ—á—Ç—ã —Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å —á—É—Ç—å –±–ª–∏–∂–µ.\n\n–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ —Å–∏–¥–µ—Ç—å, –º–æ–ª—á–∞—Ç—å –∏ –ø–æ–Ω–∏–º–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –±–µ–∑ —Å–ª–æ–≤. –ú–æ–∂–µ—Ç, –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ —Ç–∞–∫ –∂–µ –∏ —Å–µ–π—á–∞—Å?\n\n–ê –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ, –æ—Ç–ø—Ä–∞–≤–∏–º—Å—è –≤ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É!", "button": "–§–∏–Ω–∞–ª—å–Ω—É—é?! –ü–æ–µ—Ö–∞–ª–∏!"},
    {"text": "–¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ—Å—å –∫ –¥–æ–º—É –≤ –®—É–º–µ–π–∫–µ", "button": "–≠—Ç–æ —è –º–æ–≥—É!"},
    {"text": "–°—É–ø–µ—Ä, –≤—ã —É–∂–µ —Å–æ–≤—Å–µ–º –±–ª–∏–∑–∫–æ –∫ —Ñ–∏–Ω–∏—à—É. –ü–æ—Å–∏–≥–Ω–∞–ª—å—Ç–µ, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ —É –¥–æ–º–∞!", "button": "–ë–∏-–∏-–∏–ø!"},
    {"text": "*–ó–≤—É–∫–∏ –º–æ–¥–µ–º–∞*", "button": None},
    {"text": "*–ñ—É–∂–∂–∞–Ω–∏–µ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–º*", "button": None},
    {"text": "–ü—Ä–æ—Ç–æ–∫–æ–ª ¬´–í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è¬ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã. –ê —Ç–µ–ø–µ—Ä—å ‚Äî –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª: ¬´–ë—É–¥—É—â–µ–µ¬ª. –î–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞ –µ—â—ë –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –ö–∞–∫ —Ç—ã —Å—Ç—Ä–æ–∏—à—å —ç—Ç–æ—Ç –¥–æ–º, —Ç–∞–∫ –∂–µ –≤—ã –≤–¥–≤–æ—ë–º —Å—Ç—Ä–æ–∏—Ç–µ —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é. –ì–ª–∞–≤–∞ –∑–∞ –≥–ª–∞–≤–æ–π. –ú–µ—Å—Ç–æ, –≥–¥–µ –±—É–¥–µ—Ç –º–Ω–æ–≥–æ —Å–≤–µ—Ç–∞, –º–Ω–æ–≥–æ —Å–º–µ—Ö–∞ –∏ –º–Ω–æ–≥–æ ¬´–º—ã¬ª.\n \n‚Äî –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–æ–µ—Ö–∞–ª –¥–æ —Ñ–∏–Ω–∞–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∞. –õ—é–±–ª—é. –¢–≤–æ—è –î–∞—à–∞.", "button": None}
]

def send_step(chat_id, step_index):
    if step_index < 0 or step_index >= len(steps):
        return
    step = steps[step_index]
    text = step["text"] or ""
    button = step["button"]

    if button:
        markup = types.InlineKeyboardMarkup()
        btn = types.InlineKeyboardButton(text=button, callback_data="next")
        markup.add(btn)
        if text.strip():
            bot.send_message(chat_id, text, reply_markup=markup)
        else:
            bot.send_message(chat_id, " ", reply_markup=markup)
    else:
        bot.send_message(chat_id, text)
        t = threading.Timer(3.0, send_next, args=(chat_id,))
        t.start()

def send_next(chat_id):
    idx = user_states.get(chat_id, -1)
    next_idx = idx + 1
    if next_idx >= len(steps):
        return
    user_states[chat_id] = next_idx
    send_step(chat_id, next_idx)

@bot.message_handler(commands=['start'])
def handle_start(message):
    chat_id = message.chat.id
    user_states[chat_id] = -1
    send_next(chat_id)

@bot.callback_query_handler(func=lambda call: True)
def handle_callback(call):
    chat_id = call.message.chat.id
    try:
        bot.answer_callback_query(call.id)
    except:
        pass
    send_next(chat_id)

@bot.message_handler(commands=['restart'])
def handle_restart(message):
    chat_id = message.chat.id
    user_states[chat_id] = -1
    bot.send_message(chat_id, "–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å—Ü–µ–Ω–∞—Ä–∏—è...")
    send_next(chat_id)

if __name__ == '__main__':
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω. –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...")
    bot.infinity_polling()
